import R from 'ramda'

import {
    ADD_NEW_COMMENT,
    FETCH_CLIENTS_SUCCESS,
    ADD_NEW_CLIENT
} from 'actionTypes'

const initialState = {}

export default (state = initialState, {type, payload}) => {
    switch (type) {
        case FETCH_CLIENTS_SUCCESS:
            let clientsObj = {};
            payload.forEach((client)=>{
                clientsObj[client.id] = [];
            })
            return R.merge(clientsObj, state)
        case ADD_NEW_CLIENT :
            return R.merge(state, {
                [payload.id]: []
            })
        case ADD_NEW_COMMENT:
            let newCommentsObj = {[payload.clientId]: R.concat(state[payload.clientId], [payload])}
            return R.merge(state, newCommentsObj)
        default:
            return state
    }
}