import React from 'react'
import { Field, reduxForm } from 'redux-form'

import { renderInputField, renderSelectField, renderCheckboxField } from './renderFields'
import { normalizePhone, normalizeIndex} from './normalize'

import { 
    required, 
    email,
    phone,
    maxLength20,
    maxLength50
} from './validate'

let Form = props => {
    const { handleSubmit, pristine, reset, submitting } = props;

    return (
        <form className={"form " + `${props.formActive ? "form--active" : ""}`} onSubmit={ handleSubmit }>
            <div className="form__header">
                <h2 className="form__title">Регистрация клиента</h2>
                <div
                    onClick={props.togglePopup}
                    className="form__close">
                </div>
            </div>
            <div className="form__main">
                <div className="form__box form__box--left">
                    <Field
                        name="name"
                        id="firstName"
                        component={renderInputField}
                        type="text"
                        label="Имя"
                        className="form__input-text"
                        validate={[required, maxLength20]}/>
                    <Field
                        name="secondName"
                        id="secondName"
                        component={renderInputField}
                        type="text"
                        label="Фамилия"
                        className="form__input-text"
                        validate={[required, maxLength20]}/>
                    <Field
                        validate={[required, email, maxLength50]}
                        name="email"
                        id="email"
                        component={renderInputField}
                        label="Email"
                        type="email"
                        className="form__input-text"/>
                    <Field
                        validate={[required, phone]}
                        name="phone"
                        id="phone"
                        component={renderInputField}
                        normalize={normalizePhone}
                        label="Телефон"
                        type="text"
                        className="form__input-text"/>
                </div>
                <div className="form__box form__box--right">
                    <Field
                        validate={[required]}
                        name="region"
                        id="region"
                        component={renderSelectField}
                        label="Уезд"
                        className="form__input-text">
                        <option value="">- - -</option>
                        <option value="Архангельский">Архангельский уезд</option>
                        <option value="Еменский">Еменский уезд</option>
                        <option value="Онежский">Онежский уезд</option>
                    </Field>
                    <Field
                        validate={[required, maxLength20]}
                        name="city"
                        id="city"
                        component={renderInputField}
                        label="Город / Область"
                        type="text"
                        className="form__input-text"/>
                    <Field
                        validate={[required, maxLength50]}
                        name="address"
                        id="address"
                        component={renderInputField}
                        label="Адрес"
                        type="text"
                        className="form__input-text"/>
                    <Field
                        validate={[required, maxLength20]}
                        name="index"
                        id="index"
                        component={renderInputField}
                        normalize={normalizeIndex}
                        label="Индекс"
                        type="text"
                        className="form__input-text"/>
                </div>
            </div>
            <div className="form__checkblock">
                <Field name="dispatchEmail" id="dispatch-email" component={renderCheckboxField} label="Рекламная рассылка по э-почте"/>
                <Field name="dispatchSms" id="dispatch-sms" component={renderCheckboxField} label="Рекламная рассылка по смс"/>
            </div>
            <div className="form__btn-wrap">
                <button disabled={submitting} type="submit" className="form__btn">Зарегистрировать</button>
            </div>
        </form>
    )
}

Form = reduxForm({
    form: 'register',
    initialValues: {
        dispatchEmail: false,
        dispatchSms: false
    }
})(Form)

export default Form;